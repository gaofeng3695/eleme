<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <script src="iscroll.js"></script>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        html,body{
            height: 100%;
        }
        .box{
            width: 100%;
            height: 100%;
            background-color: #ff0000;
        }
        .wrapper{
            height: 100%;
            overflow: hidden;
            position: relative;
            font-size: 30px;
        }
        ul{
            overflow: hidden;
        }
        li{
            overflow: hidden;
            position: relative;
        }
    </style>
</head>
<body>
<div class="box">
    <div class="wrapper">
        <ul>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
            <li>asda</li>
        </ul>
    </div>
</div>
    <script>
       var publisher = {
           subscribers:{
               any:[]
           },
           //订阅
           subscribe:function(fn,type){
               type = type || "any";
               if(typeof this.subscribers[type] === "undefined"){
                   this.subscribers[type] = [];
           }
               this.subscribers[type].push = fn;
           },
           //取消订阅
           unsubscribe: function (fn, type) {
               this.visitSubscribers('unsubscribe', fn, type);
           },
           //发布
           publish: function (publication, type) {
               this.visitSubscribers('publish', publication, type);
           },


           visitSubscribers: function (action, arg, type) {
               var pubtype = type || 'any',
                       subscribers1 = this.subscribers[pubtype],
                       i,
                       max = subscribers1.length;

               for (i = 0; i < max; i += 1) {
                   if (action === 'publish') {
                       subscribers1[i](arg);
                   } else {
                       if (subscribers1[i] === arg) {
                           subscribers1.splice(i, 1);
                       }
                   }
               }
           }
       };

       function makePublisher(o) {
           var i;
           for (i in publisher) {
               if (publisher.hasOwnProperty(i) && typeof publisher[i] === "function") {
                   o[i] = publisher[i];
               }
           }
           o.subscribers = {any: []};
       }


       var paper = {
           daily: function () {
               this.publish("big news today");
           },
           monthly: function () {
               this.publish("interesting analysis", "monthly");
           }
       };
       makePublisher(paper);
       var joe = {
           drinkCoffee: function (paper) {
               console.log('Just read ' + paper);
           },
           sundayPreNap: function (monthly) {
               console.log('About to fall asleep reading this ' + monthly);
           }
       };
       paper.daily();
       paper.daily();
       paper.daily();
       paper.monthly();
       paper.monthly();
       paper.monthly();
    </script>
</body>
</html>